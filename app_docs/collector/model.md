

### **FieldWorker**

| Field Name             | Type                        | Description                     | Options / Constraints                             |
| ---------------------- | --------------------------- | ------------------------------- | ------------------------------------------------- |
| `email`                | `EmailField`                | Unique login identifier         | `unique`, `db_index`                              |
| `worker_id`            | `CharField`                 | Unique worker identifier        | `unique`, `db_index`, autogenerated               |
| `phone_number`         | `CharField`                 | Primary contact number          | Regex validated                                   |
| `assigned_region`      | `CharField`                 | Assigned geographic region      | Required                                          |
| `assigned_district`    | `CharField`                 | Assigned district within region | Optional                                          |
| `employment_type`      | `CharField`                 | Type of employment              | `FULL_TIME`, `PART_TIME`, `CONTRACT`, `VOLUNTEER` |
| `supervisor`           | `ForeignKey -> FieldWorker` | Reference to supervisor         | `null=True`, `blank=True`                         |
| `is_field_active`      | `BooleanField`              | Field status                    | Default: `True`                                   |
| `last_field_activity`  | `DateTimeField`             | Timestamp of last field data    | Optional                                          |
| `max_devices`          | `PositiveIntegerField`      | Max allowed devices             | Default: `2`                                      |
| `can_work_offline`     | `BooleanField`              | Can work offline                | Default: `True`                                   |
| `can_edit_submissions` | `BooleanField`              | Can edit own data               | Default: `False`                                  |
| `can_view_others_data` | `BooleanField`              | Can access other workers' data  | Default: `False`                                  |
| `created_at`           | `DateTimeField`             | Creation timestamp              | Auto set                                          |
| `updated_at`           | `DateTimeField`             | Last update timestamp           | Auto updated                                      |
| `created_by`           | `ForeignKey -> FieldWorker` | Admin who created worker        | `null=True`, `blank=True`                         |

**Special Methods / Properties**:

* `is_supervisor`: Returns `True` if supervises others
* `active_devices_count`: Count of active devices
* `can_add_device`: Boolean if new device can be added
* `get_full_address()`: Returns full region and district
* `generate_worker_id()`: Generates `worker_id` using prefix + timestamp


---

### **FieldWorkerDevice**

| Field Name            | Type                        | Description               | Constraints / Options                         |
| --------------------- | --------------------------- | ------------------------- | --------------------------------------------- |
| `worker`              | `ForeignKey -> FieldWorker` | Associated worker         | Required                                      |
| `device_id`           | `CharField`                 | Unique device identifier  | `unique`, part of `unique_together`           |
| `device_name`         | `CharField`                 | Human-readable name       | Required                                      |
| `device_type`         | `CharField`                 | Type of device            | `ANDROID`, `IOS`, `OTHER`; default: `ANDROID` |
| `is_active`           | `BooleanField`              | Device active status      | Default: `True`                               |
| `first_login`         | `DateTimeField`             | First login timestamp     | Auto set                                      |
| `last_login`          | `DateTimeField`             | Last login timestamp      | Optional                                      |
| `login_count`         | `PositiveIntegerField`      | Total number of logins    | Default: `0`                                  |
| `last_known_location` | `JSONField`                 | Last known GPS location   | Optional                                      |
| `created_at`          | `DateTimeField`             | Creation timestamp        | Auto set                                      |
| `approved_by`         | `ForeignKey -> FieldWorker` | Admin who approved device | `null=True`, `blank=True`                     |

---

### **FieldWorkerSession**

| Field Name        | Type                              | Description                     | Constraints / Options |
| ----------------- | --------------------------------- | ------------------------------- | --------------------- |
| `worker`          | `ForeignKey -> FieldWorker`       | Associated worker               | Required              |
| `device`          | `ForeignKey -> FieldWorkerDevice` | Linked device                   | Required              |
| `session_id`      | `UUIDField`                       | Unique session identifier       | Auto generated        |
| `login_time`      | `DateTimeField`                   | Session start                   | Auto set              |
| `logout_time`     | `DateTimeField`                   | Session end                     | Optional              |
| `is_active`       | `BooleanField`                    | Whether the session is ongoing  | Default: `True`       |
| `login_location`  | `JSONField`                       | Login GPS location              | Optional              |
| `ip_address`      | `GenericIPAddressField`           | Login IP address                | Optional              |
| `user_agent`      | `TextField`                       | Browser/device user agent       | Optional              |
| `is_suspicious`   | `BooleanField`                    | Suspicion flag                  | Default: `False`      |
| `failed_attempts` | `PositiveIntegerField`            | Number of failed login attempts | Default: `0`          |

**Special Property**:

* `duration`: Time difference between login and logout or now

---


When a frontend fetches data from a backend (especially from a Django REST API), the response is typically in **JSON** format. Here's what the response might look like for each of your Django models if you're using something like Django REST Framework (DRF).

---

### âœ… Example: `FieldWorker` Response

```json
{
  "id": 1,
  "email": "jane.doe@example.com",
  "worker_id": "NBI2506012",
  "first_name": "Jane",
  "last_name": "Doe",
  "phone_number": "+12345678901",
  "assigned_region": "Nairobi",
  "assigned_district": "Westlands",
  "employment_type": "FULL_TIME",
  "supervisor": null,
  "is_field_active": true,
  "last_field_activity": "2025-06-18T14:35:22Z",
  "max_devices": 2,
  "can_work_offline": true,
  "can_edit_submissions": false,
  "can_view_others_data": false,
  "created_at": "2025-06-10T08:30:00Z",
  "updated_at": "2025-06-19T12:00:00Z",
  "created_by": null,
  "is_supervisor": false,
  "active_devices_count": 1,
  "can_add_device": true,
  "get_full_address": "Westlands, Nairobi"
}
```

---

### âœ… Example: `FieldWorkerDevice` Response

```json
{
  "id": 101,
  "worker": 1,
  "device_id": "abc123-unique-id",
  "device_name": "Jane's Android",
  "device_type": "ANDROID",
  "is_active": true,
  "first_login": "2025-06-10T08:40:00Z",
  "last_login": "2025-06-20T10:20:00Z",
  "login_count": 15,
  "last_known_location": {
    "lat": -1.2921,
    "lon": 36.8219
  },
  "created_at": "2025-06-10T08:40:00Z",
  "approved_by": null
}
```

---

### âœ… Example: `FieldWorkerSession` Response

```json
{
  "id": 5001,
  "worker": 1,
  "device": 101,
  "session_id": "8a42f2de-fabc-4110-9a35-8d9059f5c2f0",
  "login_time": "2025-06-20T08:00:00Z",
  "logout_time": null,
  "is_active": true,
  "login_location": {
    "lat": -1.2921,
    "lon": 36.8219
  },
  "ip_address": "196.190.34.22",
  "user_agent": "Mozilla/5.0 (Linux; Android 11)",
  "is_suspicious": false,
  "failed_attempts": 0,
  "duration": "1:20:00"
}
```

---

### ðŸ”„ Typically in the Frontend:

* The frontend will use `fetch`, `axios`, or a similar HTTP client.
* It will expect these JSON payloads.
* Relationships (`ForeignKey`) like `worker` or `supervisor` can be either:

  * Just the `id` (as above), or
  * A nested object (if you use DRF `depth` or nested serializers).

